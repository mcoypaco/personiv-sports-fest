<md-progress-linear md-mode="indeterminate" ng-if="!sport.loaded"></md-progress-linear>
<md-content class="whiteframe" layout="row">
    <!--end of adding a new sport-->
    <!--foreach of the sports items and their CRUD-->
    <div class="md-padding" layout="column" flex="60">
        <h2>
            <md-icon md-svg-src="img/icons/sports.svg" class="svg"></md-icon> SPORTS
        </h2>
      <md-list ng-init="sport.getSports()">
          <div ng-if="sport.sports == ''" id="emptyData">
                 <h2>NO SPORTS ADDED</h2>
            </div>
            <div ng-if="sport.sports != ''">
                <md-list-item class="md-3-line" ng-repeat="sportItem in sport.sports" ng-click="editable=!editable">
                    <div class="md-list-item-text" layout="column" ng-if="!editable">
                        <h3>{{sportItem.name}}</h3>
                        <p>{{sportItem.description}}</p>
                    </div>
                    <div class="md-list-item-text" ng-if="editable" ng-init="new.name=sportItem.name;new.description=sportItem.description">
                        <section layout="row" layout-align="end start" layout-wrap>
                            <md-button class="md-icon-button" aria-label="Exit" ng-click="$parent.editable = false">
                                <md-icon md-svg-src="img/icons/close.svg"></md-icon>
                            </md-button>
                        </section>
                        <md-input-container>
                            <input type="text" class="form-control input-sm" ng-model="new.name" placeholder="Name">
                        </md-input-container>
                        <md-input-container class="md-block">
                            <input type="text" class="form-control input-lg" ng-model="new.description" placeholder="Description">
                        </md-input-container>
                        <!--foreach of the positions in sport-->
                        <md-list ng-if="sportItem.positions.length != 0">
                            <b>Positions:</b>
                            <md-list-item ng-repeat="position in sportItem.positions">
                            <p>{{position.name}}</p>
                            <md-button class="md-raised" ng-click="sport.deletePosition(position.id)">Remove</md-button>
                        </md-list-item>
                        </div>  
                    </md-list>

                    <div layout="row" layout-align="end end" layout-wrap>
                        <md-button class="md-primary md-raised" ng-click="sport.addModalPosition($event, sportItem.id)">
                            Add Position
                        </md-button>
                        <md-button class="md-raised" ng-click="sport.update(sportItem.id, new)">update</md-button>
                        <md-button class="md-raised" ng-click="sport.delete(sportItem.id)">Delete</md-button>
                    </div>
                </div>
            </md-list-item>
        </md-list>
        </div>
<!-- <div flex="5"></div> -->
<!--adding a new sport -->
<md-divider class="vertical-divider"></md-divider>
<div class="md-padding" layout="row">
    <div layout="column">
        <h2>
            <ng-md-icon icon="add_circle"></ng-md-icon> Add New Sport
        </h2>
        <form ng-submit="sport.submit(data)" name="sportForm">
            <div>
                <md-input-container>
                    <input type="text" class="form-control input-sm" name="name" ng-model="data.name" placeholder="Name" required>
                    <div ng-messages="sportForm.name.$error" role="alert" multiple="">
                        <div class="my-message" ng-message="required">You must supply a name for the sport.</div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <md-input-container class="md-block">
                    <input type="text" class="form-control input-lg" name="description" ng-model="data.description" placeholder="Description"required>
                    <div ng-messages="sportForm.description.$error" role="alert" multiple="">
                        <div class="my-message" ng-message="required">You must supply a description for the sport.</div>
                    </div>
                </md-input-container>
            </div>
            <div>
                <lf-ng-md-file-input lf-files="files" lf-browse-label="Choose" lf-remove-label="Delete" lf-drag-and-drop-label="Drag and Drop here!" drag preview lf-required></lf-ng-md-file-input>
            </div>

            <md-button class="md-raised md-primary" type="submit" ng-disabled="!sportForm.$valid">Add Sport</md-button>
        </form>
    </div>
</div>
</md-content>
