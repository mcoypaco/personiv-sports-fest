!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=20)}([function(t,e){sportsFest.controller("AuthController",["$scope","$auth","Auth","$rootScope","$state",function(t,e,n,o,r){var i=this;i.loginError=!1,i.loginErrorText,i.login=function(){var t={email:i.email,password:i.password};e.login(t).then(function(t){return n.getAuthenticatedUser().then(function(t){localStorage.setItem("user",JSON.stringify(t.data.user)),o.currentUser=t.data.user,r.go("home.home")})},function(t){i.password="",i.loginError=!0,i.loginErrorText=t.data.error})}}])},function(t,e){sportsFest.factory("Auth",["$q","$http",function(t,e){return{getAuthenticatedUser:function(){return e({method:"GET",url:"api/authenticate/user"})}}}])},function(t,e){sportsFest.factory("Authorize",["Role",function(t){var e=JSON.parse(localStorage.getItem("user"));return{isAdmin:function(){return t.getAdminId().then(function(t){var n=parseInt(t.data);return e.role_id==n})},isPoc:function(){return t.getPocId().then(function(t){var n=parseInt(t.data);return e.role_id==n})}}}])},function(t,e){sportsFest.controller("DraftController",["$scope","Player","Team","Sport","Draft","$mdDialog",function(t,e,n,o,r,i){function a(t){return u.players.map(function(t){return t.id}).indexOf(t)}function s(t){null==t.team_id?u.getSportPlayers(u.sportsId):u.players.splice(a(t.id),1)}var u=this;u.teams,u.players,u.sports,u.loaded=!1,u.limitOptions=[10,25,50,100],u.sportsId,u.query={order:"last_name",limit:10,page:1},u.getTeams=function(){n.get().then(function(t){u.teams=t.data,u.loaded=!0},function(t){})},u.getSports=function(){o.get().then(function(t){u.sports=t.data,u.getTeams()},function(t){})},u.getSports(),u.sportId,u.getSportPlayers=function(t){u.sportsId=t,u.loaded=!1,u.sportId=t,o.getPlayers(t).then(function(t){u.loaded=!0,u.players=t.data},function(t){})},u.getPosition=function(t){return t.filter(function(t){return t.sport_id===u.sportId})[0]},u.updatePlayer=function(t,n){e.update(t,n).then(function(t){},function(t){}),null!=n.team_id&&r.store(n)},u.removePlayer=function(t){t.team_id=null,u.updatePlayer(t.id,t),r.destroy(t.id)},u.showConfirm=function(t,e){var n=i.confirm().title("Would you like to Remove this player?").textContent(e.first_name+" "+e.last_name).ariaLabel("Position").targetEvent(t).ok("REMOVE").cancel("Cancel");i.show(n).then(function(){u.removePlayer(e)},function(){})},socket.on("draft.player:App\\Events\\DraftPlayer",function(e){u.getTeams(),s(e.player),t.$apply()})}])},function(t,e){sportsFest.factory("Draft",["$q","$http",function(t,e){return{store:function(t){return e({method:"POST",url:"api/drafts",data:t,headers:{"Content-Type":"application/json"}})},destroy:function(t){return e.delete("/api/drafts/"+t)}}}])},function(t,e){sportsFest.controller("HomeController",["$scope","$http","Sport",function(t,e,n){var o=this;o.loaded=!1,n.get().then(function(t){o.sports=t.data,o.loaded=!0})}])},function(t,e){sportsFest.controller("IndexController",["$scope","$mdToast","$mdDialog","$log","$mdSidenav","$mdBottomSheet","$q","MenuItemsService","$mdMenu","$auth","$state","$window","Role",function(t,e,n,o,r,i,a,s,u,c,l,p,d){function f(){r("right").toggle()}function m(){var t=i.hide()||a.when(!0);t.then(function(){r("left").toggle()})}function h(t){P.toggleItemsList(),P.showSimpleToast(t.name)}function g(t){e.show(e.simple().content(t).hideDelay(1500).position("bottom right"))}function y(t){return s.isSectionSelected(t)}function T(t){s.toggleSelectSection(t)}var P=this;P.user,P.getRole=function(t){d.show(t).then(function(t){P.role=t.data})},P.logout=function(){r("right").toggle(),localStorage.removeItem("user"),c.logout(),l.go("home.home"),p.location.reload()},P.isAuthenticated=function(){return c.isAuthenticated()},t.setHome=function(){t.currentNavItem="home"},P.toggleRightSidebar=f,P.toggleItemsList=m,P.selectItem=h,P.showSimpleToast=g,P.menuItems=[],s.loadAllItems().then(function(t){P.menuItems=[].concat(t)}),P.isOpen=y,P.toggleOpen=T,P.autoFocusContent=!1,P.menu=s,P.status={isFirstOpen:!0,isFirstDisabled:!1}}])},function(t,e){sportsFest.service("MenuItemsService",["$q",function(t){var e=[{name:"Home",icon:"dashboard",sref:".home",show:!0},{name:"Draft",icon:"swap_vert",sref:".draft",show:!1},{name:"Players",icon:"person",sref:".players",show:!1}],n=[];n.push({name:"Settings",type:"toggle",pages:[{name:"Sports",state:"home.sports",type:"link",icon:"blur_circular"},{name:"Users",state:"home.users",type:"link",icon:"people"},{name:"Teams",state:"home.teams",type:"link",icon:"person_add"}]});var o;return o={sections:n,toggleSelectSection:function(t){o.openedSection=o.openedSection===t?null:t},isSectionSelected:function(t){return o.openedSection===t},loadAllItems:function(){return t.when(e)},loadAllSettings:function(){return t.when(n)}}}])},function(t,e){sportsFest.controller("PlayerController",["$scope","Player","Sport","Position",function(t,e,n,o){var r=this;r.sports,r.filteredPlayers,r.selectedSport,r.i=0,r.filteredPlayersId=[],r.loaded=!1,r.players,r.getAllPlayers=function(){e.get().then(function(t){r.players=t.data,r.loaded=!0})},r.getAllPlayers(),r.submit=function(t){e.store(t).success(function(t){}).error(function(t){})},r.getSports=function(){n.get().then(function(t){r.sports=t.data},function(t){})},r.getSport=function(t){return r.sports.filter(function(e){return e.id.toString()===t})},r.sportPlayers=function(t){r.loaded=!1,"all"==t?(r.loaded=!0,r.getAllPlayers()):n.players(t).then(function(t){r.players=t.data,r.sportPlayerList=t.data,r.loaded=!0})},r.positionPlayers=function(t){r.loaded=!1,"all"==t?(r.loaded=!0,r.players=r.sportPlayerList):o.players(t).then(function(t){r.players=t.data,r.loaded=!0})},r.sortFilteredPlayers=function(t){var e=[];for(i=0;i<r.filteredPlayers.length;i++)r.filteredPlayers[i].positions.filter(function(n){n.id.toString()===t&&e.push(r.filteredPlayers[i])});r.filteredPlayers=e},r.getPosition=function(t,e){return t.filter(function(t){return t.sport_id===e})},r.export=function(t){e.export(t).then(function(n){e.exportFile(n,t)},function(t){})},socket.on("add.players:App\\Events\\AddPlayers",function(e){t.$apply(function(){r.players.unshift(e.data)})})}])},function(t,e){sportsFest.factory("Player",["$q","$http",function(t,e){return{get:function(){return e({method:"GET",url:"api/players"})},noTeamGet:function(){return e({method:"GET",url:"api/players/noteam"})},getPosition:function(e,n){var o=t.defer();return this.show(e).then(function(t){var e=!0,r=!1,i=void 0;try{for(var a,s=t.data.positions[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var u=a.value;if(u.sport_id===n){o.resolve(u);break}}}catch(t){r=!0,i=t}finally{try{!e&&s.return&&s.return()}finally{if(r)throw i}}}),o.promise},store:function(t){return e({method:"POST",url:"api/players",data:t,headers:{"Content-Type":"application/json"}})},show:function(t){return e.get("/api/players/"+t)},update:function(t,n){return e({method:"POST",url:"api/players/"+t,data:n,headers:{"Content-Type":"application/json"}})},destroy:function(t){return e.delete("/api/players/"+t)},export:function(t){return e({method:"GET",url:"/api/players/export/"+t,headers:{"Content-Type":"application/csv; charset=UTF-8"}})},exportFile:function(t,e){var n=angular.element("<a/>");n.css({display:"none"}),angular.element(document.body).append(n),n.attr({href:"data:attachment/"+e+";charset=utf-8,"+encodeURI(t.data),target:"_blank",download:"document."+e})[0].click(),n.remove()}}}])},function(t,e){sportsFest.factory("Position",["$q","$http",function(t,e){return{get:function(){return e({method:"GET",url:"api/positions"})},store:function(t){return e({method:"POST",url:"api/positions",data:t,headers:{"Content-Type":"application/json"}})},show:function(t){return e.get("/api/positions/"+t)},update:function(t,n){return e({method:"PUT",url:"api/positions/"+t,data:n,headers:{"Content-Type":"application/json"}})},destroy:function(t){return e({method:"DELETE",url:"api/positions/"+t})},players:function(t){return e.get("api/positions/"+t+"/players")}}}])},function(t,e){sportsFest.controller("SportController",["$scope","$mdDialog","Sport","Position",function(t,e,n,o){function r(t,e,n){t.data={name:e.name,description:e.description},t.cancel=function(){n.cancel()},t.update=function(t){n.hide(t)}}var i=this;i.sports,i.newPosition={},i.editable=!1,i.loaded=!1,i.submit=function(t){n.store(t).success(function(t){i.getSports(),i.upload(t.id)}).error(function(t){})},i.upload=function(e){var o=new FormData;o.append("file",t.files[0].lfFile),n.upload(o,e).then(function(t){},function(t){})},i.getSports=function(){n.get().then(function(t){i.sports=t.data,i.loaded=!0},function(t){})},i.getSports(),i.delete=function(t){n.destroy(t).success(function(t){}).error(function(t){})},i.update=function(t,e){n.update(t,e).success(function(t){i.getSports()}).error(function(t){})},i.addPosition=function(t){i.newPosition.id=t,o.store(i.newPosition).success(function(t){i.getSports()}).error(function(t){})},i.deletePosition=function(t){o.destroy(t).success(function(t){i.getSports()}).error(function(t){})},i.addModalPosition=function(t,n){var o=e.prompt().title("New Position").placeholder("Position name").ariaLabel("Position name").targetEvent(t).ok("Save").cancel("Cancel");e.show(o).then(function(t){i.newPosition.name=t,i.addPosition(n)})},i.showConfirm=function(t,n,o){var r=e.confirm().title("Would you like to delete ?").textContent(n.name).ariaLabel("Item").targetEvent(t).ok("DELETE").cancel("Cancel");e.show(r).then(function(){"position"==o?i.deletePosition(n.id):i.delete(n.id)},function(){})},socket.on("add.players:App\\Events\\AddPlayers",function(e){t.$apply(function(){i.sports.unshift(e.sport)})}),i.updateModal=function(t,n){e.show({locals:{item:n},controller:r,templateUrl:"update.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){i.update(n.id,t)})}}])},function(t,e){sportsFest.factory("Sport",["$q","$http",function(t,e){var n="api/sports";return{get:function(){return e({method:"GET",url:n})},store:function(t){return e({method:"POST",url:n,data:t,headers:{"Content-Type":"application/json"}})},show:function(t){return e({mehod:"GET",url:n+"/"+t})},update:function(t,o){return e({method:"PUT",url:n+"/"+t,data:o,headers:{"Content-Type":"application/json"}})},destroy:function(t){return e({method:"DELETE",url:n+"/"+t})},upload:function(t,o){return e.post(n+"/upload/"+o,t,{transformRequest:angular.identity,headers:{"Content-Type":void 0}})},players:function(t){return e.get("api/sports/"+t+"/players")},positions:function(t){return e.get("api/sports/"+t+"/positions")},getPlayers:function(t){return e.get(n+"/players/noteam/"+t)}}}])},function(t,e){sportsFest.controller("TeamController",["$http","User","Team","$state","$stateParams","$scope",function(t,e,n,o,r,i){var a=this;a.editable=!1,a.loaded=!1,a.addTeam=function(t){n.store(t).then(function(t){}).catch(function(t){})},a.getTeams=function(){n.get().then(function(t){a.teams=t.data,a.loaded=!0},function(t){})},a.getTeams(),socket.on("changed.team:App\\Events\\ChangedTeam",function(t){a.teams=t.data,a.getPocs(),i.$apply()}),a.getTeam=function(){n.show(r.id).then(function(t){a.data=t.data[0],a.getTeamPoc(t.data[0].user_id)}).catch(function(t){})},a.showTeam=function(t){o.go("home.teams_view",{id:t})},a.getPocs=function(){e.poc().then(function(t){a.poc=t.data})},a.getPocs(),a.getSports=function(){t({method:"GET",url:"api/sports"}).then(function(t){a.sports=t.data})},a.getSports(),a.getTeamPoc=function(t){e.show(t).then(function(t){a.data.poc=t.data}).catch(function(t){})}}])},function(t,e){sportsFest.factory("Team",["$q","$http",function(t,e){var n="api/teams";return{get:function(){return e({method:"GET",url:n})},show:function(t){return e({mehod:"GET",url:n+"/"+t})},store:function(t){return e({method:"POST",url:n,data:t,headers:{"Content-Type":"application/json"}})},update:function(t,o){return e({method:"PUT",url:n+"/"+t,data:o,headers:{"Content-Type":"application/json"}})},destroy:function(t){}}}])},function(t,e){sportsFest.factory("Role",["$q","$http",function(t,e){return{get:function(){return e({method:"GET",url:"api/roles"})},store:function(t){return e({method:"POST",url:"api/roles",data:t,headers:{"Content-Type":"application/json"}})},show:function(t){return e.get("/api/roles/"+t)},update:function(t,n){return e({method:"PUT",url:"api/roles/"+t,data:n,headers:{"Content-Type":"application/json"}})},destroy:function(t){return e({method:"DELETE",url:"api/roles/"+t})},getAdminId:function(){return e({method:"GET",url:"api/roles/admin"})}}}])},function(t,e){sportsFest.controller("UserController",["$scope","User","Role","$mdDialog",function(t,e,n,o){function r(t,e,n){t.data={email:e.email,first_name:e.first_name,last_name:e.last_name,cellphone_number:e.cellphone_number,role_id:e.role_id,roles:i.roles},t.cancel=function(){n.cancel()},t.update=function(t){n.hide(t)}}var i=this;i.users,i.roles,i.loaded=!1,i.register=function(t){e.store(t).success(function(t){}).error(function(t){})},i.getUsers=function(){e.get().then(function(t){i.users=t.data,i.loaded=!0},function(t){})},i.getUsers(),i.getRoles=function(){n.get().then(function(t){i.roles=t.data},function(t){})},i.getRoles(),i.update=function(t,n){e.update(t,n).then(function(t){i.getUsers()},function(t){})},i.editModal=function(t,e){o.show({locals:{item:e},controller:r,templateUrl:"edit.tmpl.html",parent:angular.element(document.body),targetEvent:t,clickOutsideToClose:!1}).then(function(t){delete t.roles,i.update(e.id,t)})}}])},function(t,e){sportsFest.factory("User",["$q","$http",function(t,e){var n="api/users";return{get:function(){return e({method:"GET",url:n})},show:function(t){return e({mehod:"GET",url:n+"/"+t})},store:function(t){return e({method:"POST",url:n,data:t,headers:{"Content-Type":"application/json"}})},update:function(t,o){return e({method:"PUT",url:n+"/"+t,data:o,headers:{"Content-Type":"application/json"}})},destroy:function(t){},poc:function(){return e({method:"GET",url:n+"/poc"})}}}])},function(t,e){sportsFest.directive("menuLink",function(){return{scope:{section:"="},templateUrl:"partials/menu-link.tmpl.html",link:function(t,e){var n=e.parent().controller();t.focusSection=function(){n.autoFocusContent=!0}}}})},function(t,e){sportsFest.directive("menuToggle",["$timeout",function(t){return{scope:{section:"="},templateUrl:"partials/menu-toggle.tmpl.html",link:function(t,e){var n=e.parent().controller();t.isOpen=function(){return n.isOpen(t.section)},t.toggle=function(){n.toggleOpen(t.section)};var o=e[0].parentNode.parentNode.parentNode;if(o.classList.contains("parent-list-item")){var r=o.querySelector("h2");e[0].firstChild.setAttribute("aria-describedby",r.id)}}}}])},function(t,e,n){n(0),n(1),n(2),n(3),n(4),n(5),n(6),n(7),n(8),n(9),n(10),n(11),n(12),n(14),n(13),n(15),n(16),n(17),n(18),t.exports=n(19)}]);